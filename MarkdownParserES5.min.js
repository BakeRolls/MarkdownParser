'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if('value' in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}var MarkdownParser=(function(){function MarkdownParser(text){_classCallCheck(this,MarkdownParser);this.text = text;this.elements = [];this.regex = {headlines:{regex:/(#+)\s(.+?)\n/gi,parts:{found:0,level:1,text:2}},links:{regex:/\[(.+?)\]\((.+?)(\s"?(.+?)"?)?\)/gi,parts:{found:0,text:1,url:2,alt:4}}};this.query();}_createClass(MarkdownParser,[{key:'query',value:function query(){this.elements = [];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.keys(this.regex)[Symbol.iterator](),_step;!(_iteratorNormalCompletion = (_step = _iterator.next()).done);_iteratorNormalCompletion = true) {var element=_step.value;var match=undefined; //this.elements[element] = [];
while(match = this.regex[element].regex.exec(this.text)) {var parts={type:element,index:match.index};var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=Object.keys(this.regex[element].parts)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done);_iteratorNormalCompletion2 = true) {var part=_step2.value;parts[part] = match[this.regex[element].parts[part]];} //this.elements[element].push(parts);
}catch(err) {_didIteratorError2 = true;_iteratorError2 = err;}finally {try{if(!_iteratorNormalCompletion2 && _iterator2['return']){_iterator2['return']();}}finally {if(_didIteratorError2){throw _iteratorError2;}}}this.elements.push(parts);}}}catch(err) {_didIteratorError = true;_iteratorError = err;}finally {try{if(!_iteratorNormalCompletion && _iterator['return']){_iterator['return']();}}finally {if(_didIteratorError){throw _iteratorError;}}}this.elements.sort(function(a,b){return a.index > b.index;});}},{key:'generateTag',value:function generateTag(tag){var md='';switch(tag.type){case 'links':md = '[' + tag.text + '](' + tag.url;md += tag.alt?' "' + tag.alt + '"':'';md += ')';break;case 'headlines':md = tag.level + ' ' + tag.text;break;}return md;}},{key:'generateHeadline',value:function generateHeadline(headline){return headline.level + ' ' + headline.text;}},{key:'replace',value:function replace(string,index,length,substitute){return string.substring(0,index) + substitute + string.substring(index + length);}},{key:'get',value:function get(type){return this.elements.filter(function(a){return a.type == type;});}},{key:'render',value:function render(){this.elements.reverse();var text=this.text;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.elements[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done);_iteratorNormalCompletion3 = true) {var element=_step3.value;text = this.replace(text,element.index,element.found.length,this.generateTag(element));}}catch(err) {_didIteratorError3 = true;_iteratorError3 = err;}finally {try{if(!_iteratorNormalCompletion3 && _iterator3['return']){_iterator3['return']();}}finally {if(_didIteratorError3){throw _iteratorError3;}}}this.elements.reverse();return text;}}]);return MarkdownParser;})();

